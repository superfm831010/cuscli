# Phase 8: å®Œæ•´æµ‹è¯•æŒ‡å—

## ğŸ¯ æµ‹è¯•ç›®æ ‡

å…¨é¢æµ‹è¯•æ‰€æœ‰åŠŸèƒ½ï¼Œç¡®ä¿è´¨é‡å’Œç¨³å®šæ€§ã€‚

## ğŸ“‹ æµ‹è¯•å‡†å¤‡

### ç¯å¢ƒå‡†å¤‡

1. **GitHub æµ‹è¯•è´¦å·**
   - è´¦å·ï¼šæ‚¨çš„ GitHub è´¦å·
   - Token è·å–ï¼š
     1. GitHub â†’ Settings â†’ Developer settings
     2. Personal access tokens â†’ Tokens (classic)
     3. Generate new token
     4. å‹¾é€‰ï¼š`repo`, `read:user`
     5. å¤åˆ¶ token

2. **GitLab æµ‹è¯•è´¦å·**
   - è´¦å·ï¼šæ‚¨çš„ GitLab è´¦å·ï¼ˆgitlab.comï¼‰
   - Token è·å–ï¼š
     1. GitLab â†’ Settings â†’ Access Tokens
     2. Add new token
     3. å‹¾é€‰ï¼š`api`
     4. å¤åˆ¶ token

3. **æ¸…ç†æµ‹è¯•ç¯å¢ƒ**
   ```bash
   # å¤‡ä»½ç°æœ‰é…ç½®ï¼ˆå¦‚æœæœ‰ï¼‰
   cp .auto-coder/plugins/autocoder.plugins.GitHelperPlugin/config.json \
      config.json.backup

   # åˆ é™¤é…ç½®ä»¥å…¨æ–°å¼€å§‹
   rm -f .auto-coder/plugins/autocoder.plugins.GitHelperPlugin/config.json
   ```

---

## ğŸ§ª æµ‹è¯•ç”¨ä¾‹

### æµ‹è¯•å¥—ä»¶ 1: GitHub é…ç½®ç®¡ç†

#### 1.1 æ·»åŠ  GitHub é…ç½®

```bash
/git /github /setup
```

**è¾“å…¥ï¼š**
- åç§°ï¼š`test-github`
- API åœ°å€ï¼šï¼ˆå›è½¦ï¼Œä½¿ç”¨é»˜è®¤ï¼‰
- Tokenï¼š`<æ‚¨çš„çœŸå® GitHub Token>`
- SSL éªŒè¯ï¼š`y`
- è¶…æ—¶ï¼šï¼ˆå›è½¦ï¼Œä½¿ç”¨é»˜è®¤ 30ï¼‰

**é¢„æœŸç»“æœï¼š**
- âœ… æ˜¾ç¤ºç¡®è®¤è¡¨æ ¼
- âœ… ä¿å­˜æˆåŠŸ
- âœ… æç¤ºå¯ä»¥æµ‹è¯•è¿æ¥

#### 1.2 æµ‹è¯•è¿æ¥

```bash
/git /github /test test-github
```

**é¢„æœŸç»“æœï¼š**
- âœ… æ˜¾ç¤º "è¿æ¥æˆåŠŸ"
- âœ… æ˜¾ç¤ºç”¨æˆ·åå’Œ ID
- âœ… æ˜¾ç¤º API é™é¢ä¿¡æ¯

#### 1.3 åˆ—å‡ºé…ç½®

```bash
/git /github /list
```

**é¢„æœŸç»“æœï¼š**
- âœ… æ˜¾ç¤ºé…ç½®è¡¨æ ¼
- âœ… åŒ…å« `test-github`
- âœ… æ˜¾ç¤ºæœ€åæµ‹è¯•æ—¶é—´

#### 1.4 ä¿®æ”¹é…ç½®

```bash
/git /github /modify test-github
```

**æ“ä½œï¼š**
- è¶…æ—¶æ”¹ä¸º 60

**é¢„æœŸç»“æœï¼š**
- âœ… ä¿®æ”¹æˆåŠŸ
- âœ… å†æ¬¡æŸ¥çœ‹é…ç½®ï¼Œè¶…æ—¶ä¸º 60

#### 1.5 æ·»åŠ ç¬¬äºŒä¸ªé…ç½®

```bash
/git /github /setup
```

**è¾“å…¥ï¼š**
- åç§°ï¼š`test-github-2`
- å…¶ä»–ï¼šéšæ„

**é¢„æœŸç»“æœï¼š**
- âœ… ä¸¤ä¸ªé…ç½®éƒ½æ˜¾ç¤ºåœ¨åˆ—è¡¨ä¸­

#### 1.6 åˆ é™¤é…ç½®

```bash
/git /github /delete test-github-2
```

**é¢„æœŸç»“æœï¼š**
- âœ… ç¡®è®¤æç¤º
- âœ… åˆ é™¤æˆåŠŸ
- âœ… åˆ—è¡¨ä¸­åªå‰©ä¸€ä¸ªé…ç½®

---

### æµ‹è¯•å¥—ä»¶ 2: GitLab é…ç½®ç®¡ç†

#### 2.1 æ·»åŠ  GitLab é…ç½®

```bash
/git /gitlab /setup
```

**è¾“å…¥ï¼š**
- åç§°ï¼š`test-gitlab`
- åœ°å€ï¼š`https://gitlab.com`
- Tokenï¼š`<æ‚¨çš„çœŸå® GitLab Token>`
- SSL éªŒè¯ï¼š`y`
- è¶…æ—¶ï¼š30

**é¢„æœŸç»“æœï¼š**
- âœ… è‡ªåŠ¨æ·»åŠ  `/api/v4` è·¯å¾„
- âœ… ä¿å­˜æˆåŠŸ

#### 2.2 æµ‹è¯•è¿æ¥

```bash
/git /gitlab /test test-gitlab
```

**é¢„æœŸç»“æœï¼š**
- âœ… è¿æ¥æˆåŠŸ
- âœ… æ˜¾ç¤ºç”¨æˆ·åå’Œå§“å
- âœ… æ˜¾ç¤º GitLab ç‰ˆæœ¬

#### 2.3 ç§æœ‰ GitLab æ¨¡æ‹Ÿ

```bash
/git /gitlab /setup
```

**è¾“å…¥ï¼š**
- åç§°ï¼š`private-gitlab`
- åœ°å€ï¼š`https://gitlab.example.local`
- Tokenï¼š`fake-token`
- SSL éªŒè¯ï¼š`n`

**é¢„æœŸç»“æœï¼š**
- âœ… é…ç½®ä¿å­˜æˆåŠŸ
- âœ… æµ‹è¯•è¿æ¥å¤±è´¥ï¼Œæ˜¾ç¤ºè¿æ¥é”™è¯¯

#### 2.4 åˆ—è¡¨å’Œç®¡ç†

```bash
/git /gitlab /list
/git /gitlab /modify private-gitlab
/git /gitlab /delete private-gitlab
```

**é¢„æœŸç»“æœï¼š**
- âœ… åŠŸèƒ½æ­£å¸¸

---

### æµ‹è¯•å¥—ä»¶ 3: å¹³å°åˆ‡æ¢

#### 3.1 æŸ¥çœ‹åˆå§‹çŠ¶æ€

```bash
/git /platform
```

**é¢„æœŸç»“æœï¼š**
- âœ… æ˜¾ç¤ºå½“å‰å¹³å°å’Œé…ç½®

#### 3.2 åˆ‡æ¢åˆ° GitLab

```bash
/git /platform /switch gitlab
```

**é¢„æœŸç»“æœï¼š**
- âœ… åˆ‡æ¢æˆåŠŸ
- âœ… æ˜¾ç¤º GitLab é…ç½®ä¿¡æ¯

#### 3.3 éªŒè¯åˆ‡æ¢

```bash
/git /platform
```

**é¢„æœŸç»“æœï¼š**
- âœ… æ˜¾ç¤º GitLab ä¸ºå½“å‰å¹³å°

#### 3.4 åˆ‡æ¢å› GitHub

```bash
/git /platform /switch github
```

**é¢„æœŸç»“æœï¼š**
- âœ… åˆ‡æ¢æˆåŠŸ

#### 3.5 å¹³å°æ¦‚è§ˆ

```bash
/git /platform /list
```

**é¢„æœŸç»“æœï¼š**
- âœ… æ˜¾ç¤ºæ‰€æœ‰å¹³å°çš„é…ç½®
- âœ… å½“å‰å¹³å°æœ‰ âœ… æ ‡è®°

#### 3.6 å¤šé…ç½®åˆ‡æ¢

**æ·»åŠ ç¬¬äºŒä¸ª GitHub é…ç½®ï¼š**
```bash
/git /github /setup
# åç§°ï¼šgithub-work
```

**åˆ‡æ¢å¹¶æŒ‡å®šé…ç½®ï¼š**
```bash
/git /platform /switch github github-work
```

**é¢„æœŸç»“æœï¼š**
- âœ… åˆ‡æ¢æˆåŠŸ
- âœ… ä½¿ç”¨æŒ‡å®šçš„é…ç½®

---

### æµ‹è¯•å¥—ä»¶ 4: é”™è¯¯å¤„ç†

#### 4.1 æ— æ•ˆ Token

```bash
/git /github /setup
# è¾“å…¥æ— æ•ˆ token: invalid-token-12345
/git /github /test <é…ç½®å>
```

**é¢„æœŸç»“æœï¼š**
- âœ… æ˜¾ç¤º "401 è®¤è¯å¤±è´¥"

#### 4.2 æ— æ•ˆ URL

```bash
/git /gitlab /setup
# åœ°å€ï¼šhttps://invalid-url-that-does-not-exist.com
/git /gitlab /test <é…ç½®å>
```

**é¢„æœŸç»“æœï¼š**
- âœ… æ˜¾ç¤ºè¿æ¥é”™è¯¯

#### 4.3 SSL é”™è¯¯ï¼ˆä»…é™æœ‰ SSL é—®é¢˜çš„ç¯å¢ƒï¼‰

```bash
/git /gitlab /setup
# åœ°å€ï¼šhttps://self-signed-ssl.example.com
# SSLï¼šy
/git /gitlab /test <é…ç½®å>
```

**é¢„æœŸç»“æœï¼š**
- âœ… æ˜¾ç¤º SSL éªŒè¯å¤±è´¥
- âœ… æä¾›ä¿®å¤å»ºè®®

#### 4.4 è¶…æ—¶æµ‹è¯•

```bash
/git /github /modify <é…ç½®å>
# è¶…æ—¶æ”¹ä¸º 1 ç§’

# ç„¶ååœ¨æ…¢é€Ÿç½‘ç»œä¸‹æµ‹è¯•
/git /github /test <é…ç½®å>
```

**é¢„æœŸç»“æœï¼š**
- âœ… æ˜¾ç¤ºè¶…æ—¶é”™è¯¯

#### 4.5 åˆ é™¤ä¸å­˜åœ¨çš„é…ç½®

```bash
/git /github /delete non-existent-config
```

**é¢„æœŸç»“æœï¼š**
- âœ… æç¤ºé…ç½®ä¸å­˜åœ¨

#### 4.6 åˆ‡æ¢åˆ°æœªé…ç½®çš„å¹³å°

**åˆ é™¤æ‰€æœ‰ GitLab é…ç½®åï¼š**
```bash
/git /platform /switch gitlab
```

**é¢„æœŸç»“æœï¼š**
- âœ… æç¤ºéœ€è¦å…ˆé…ç½®

---

### æµ‹è¯•å¥—ä»¶ 5: å‘½ä»¤è¡¥å…¨

#### 5.1 é™æ€è¡¥å…¨

**æµ‹è¯•æ‰€æœ‰çº§åˆ«ï¼š**
- `/git /` + Tab â†’ æ˜¾ç¤ºæ‰€æœ‰å­å‘½ä»¤
- `/git /github /` + Tab â†’ æ˜¾ç¤º GitHub å­å‘½ä»¤
- `/git /gitlab /` + Tab â†’ æ˜¾ç¤º GitLab å­å‘½ä»¤
- `/git /platform /` + Tab â†’ æ˜¾ç¤º `/switch`, `/list`

#### 5.2 åŠ¨æ€è¡¥å…¨

**é…ç½®åè¡¥å…¨ï¼š**
- `/git /github /modify ` + Tab â†’ æ˜¾ç¤ºæ‰€æœ‰ GitHub é…ç½®
- `/git /gitlab /test ` + Tab â†’ æ˜¾ç¤ºæ‰€æœ‰ GitLab é…ç½®

**å¹³å°åˆ‡æ¢è¡¥å…¨ï¼š**
- `/git /platform /switch ` + Tab â†’ æ˜¾ç¤º `github`, `gitlab`
- `/git /platform /switch github ` + Tab â†’ æ˜¾ç¤º GitHub é…ç½®åˆ—è¡¨

**è¿‡æ»¤è¡¥å…¨ï¼š**
- è¾“å…¥éƒ¨åˆ†é…ç½®å + Tab â†’ åªæ˜¾ç¤ºåŒ¹é…çš„

---

### æµ‹è¯•å¥—ä»¶ 6: PR æ¨¡å—é›†æˆ

#### 6.1 éªŒè¯åˆå§‹åŒæ­¥

```bash
# å¯åŠ¨åº”ç”¨
python -m autocoder.chat_auto_coder

# æ£€æŸ¥æ—¥å¿—
tail -f .auto-coder/logs/auto-coder.log | grep "PR é…ç½®"
```

**é¢„æœŸç»“æœï¼š**
- âœ… çœ‹åˆ°é…ç½®åŒæ­¥æ—¥å¿—

#### 6.2 åˆ‡æ¢ååŒæ­¥

```bash
/git /platform /switch gitlab
# æ£€æŸ¥æ—¥å¿—
```

**é¢„æœŸç»“æœï¼š**
- âœ… çœ‹åˆ° "å¹³å°åˆ‡æ¢åå·²åŒæ­¥ PR é…ç½®"

#### 6.3 éªŒè¯ PR é…ç½®

**åˆ›å»ºæµ‹è¯•è„šæœ¬ï¼š**
```python
from autocoder.common.pull_requests import get_global_manager

manager = get_global_manager()
if manager.config:
    print(f"å¹³å°: {manager.config.platform}")
    print(f"åœ°å€: {manager.config.base_url}")
else:
    print("æœªé…ç½®")
```

**é¢„æœŸç»“æœï¼š**
- âœ… æ˜¾ç¤ºå½“å‰æ¿€æ´»å¹³å°çš„é…ç½®

---

### æµ‹è¯•å¥—ä»¶ 7: é…ç½®æŒä¹…åŒ–

#### 7.1 é‡å¯åé…ç½®ä¿ç•™

```bash
# é…ç½®å¹³å°
/git /github /setup
/git /platform /switch github

# é€€å‡ºåº”ç”¨
/exit

# é‡æ–°å¯åŠ¨
python -m autocoder.chat_auto_coder

# æ£€æŸ¥é…ç½®
/git /platform
/git /github /list
```

**é¢„æœŸç»“æœï¼š**
- âœ… é…ç½®å…¨éƒ¨ä¿ç•™
- âœ… å½“å‰å¹³å°ä¿æŒä¸å˜

#### 7.2 é…ç½®æ–‡ä»¶æ ¼å¼

```bash
cat .auto-coder/plugins/autocoder.plugins.GitHelperPlugin/config.json | jq
```

**é¢„æœŸç»“æœï¼š**
- âœ… JSON æ ¼å¼æ­£ç¡®
- âœ… Token å·²åŠ å¯†ï¼ˆä¸æ˜¯æ˜æ–‡ï¼‰
- âœ… åŒ…å«æ‰€æœ‰å¿…è¦å­—æ®µ

---

## âœ… æµ‹è¯•æ£€æŸ¥æ¸…å•

### åŠŸèƒ½å®Œæ•´æ€§
- [ ] GitHub é…ç½®ç®¡ç†ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰
- [ ] GitLab é…ç½®ç®¡ç†ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰
- [ ] å¹³å°åˆ‡æ¢åŠŸèƒ½
- [ ] è¿æ¥æµ‹è¯•åŠŸèƒ½
- [ ] å‘½ä»¤è¡¥å…¨ï¼ˆé™æ€+åŠ¨æ€ï¼‰
- [ ] PR æ¨¡å—é›†æˆ
- [ ] é…ç½®æŒä¹…åŒ–

### ç”¨æˆ·ä½“éªŒ
- [ ] å¼•å¯¼å¼é…ç½®å‹å¥½æ˜“ç”¨
- [ ] é”™è¯¯æç¤ºæ¸…æ™°æ˜ç¡®
- [ ] æˆåŠŸ/å¤±è´¥çŠ¶æ€æ˜¾ç¤ºæ˜ç¡®
- [ ] å¸®åŠ©ä¿¡æ¯å®Œæ•´
- [ ] è¡¥å…¨æ™ºèƒ½å‡†ç¡®

### å¥å£®æ€§
- [ ] æ— æ•ˆè¾“å…¥å¤„ç†æ­£å¸¸
- [ ] ç½‘ç»œé”™è¯¯å¤„ç†æ­£å¸¸
- [ ] SSL é”™è¯¯å¤„ç†æ­£å¸¸
- [ ] è¶…æ—¶å¤„ç†æ­£å¸¸
- [ ] è¾¹ç•Œæ¡ä»¶å¤„ç†æ­£å¸¸

### æ€§èƒ½
- [ ] é…ç½®åŠ è½½å¿«é€Ÿ
- [ ] è¡¥å…¨å“åº”åŠæ—¶
- [ ] è¿æ¥æµ‹è¯•æœ‰è¿›åº¦æŒ‡ç¤º

---

## ğŸ“ æµ‹è¯•æŠ¥å‘Šæ¨¡æ¿

```markdown
# Git å¹³å°æ’ä»¶æµ‹è¯•æŠ¥å‘Š

## æµ‹è¯•ç¯å¢ƒ
- æ“ä½œç³»ç»Ÿï¼š
- Python ç‰ˆæœ¬ï¼š
- é¡¹ç›®ç‰ˆæœ¬ï¼š

## æµ‹è¯•ç»“æœ

### GitHub é…ç½®ç®¡ç†
- [ ] é€šè¿‡
- é—®é¢˜ï¼š

### GitLab é…ç½®ç®¡ç†
- [ ] é€šè¿‡
- é—®é¢˜ï¼š

### å¹³å°åˆ‡æ¢
- [ ] é€šè¿‡
- é—®é¢˜ï¼š

### å‘½ä»¤è¡¥å…¨
- [ ] é€šè¿‡
- é—®é¢˜ï¼š

### PR é›†æˆ
- [ ] é€šè¿‡
- é—®é¢˜ï¼š

## å‘ç°çš„ Bug
1. ...

## æ”¹è¿›å»ºè®®
1. ...

## æµ‹è¯•ç»“è®º
- [ ] é€šè¿‡ï¼Œå¯ä»¥å‘å¸ƒ
- [ ] éƒ¨åˆ†é€šè¿‡ï¼Œéœ€è¦ä¿®å¤
- [ ] æœªé€šè¿‡ï¼Œéœ€è¦é‡å¤§ä¿®æ”¹
```

---

## ğŸ‰ æµ‹è¯•å®Œæˆï¼

æ‰€æœ‰æµ‹è¯•é€šè¿‡åï¼š

â¡ï¸ **ä¸‹ä¸€æ­¥**: é˜…è¯» `09-user-guide.md`ï¼Œç¼–å†™ç”¨æˆ·æ–‡æ¡£
