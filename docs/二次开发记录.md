# Autocoder äºŒæ¬¡å¼€å‘è®°å½•

> **é¡¹ç›®èƒŒæ™¯**: æœ¬é¡¹ç›®åŸºäº auto-coder 1.0.39 ç‰ˆæœ¬(æå–è‡ªwheelåŒ…)è¿›è¡ŒäºŒæ¬¡å¼€å‘å’Œç ”ç©¶ã€‚

## å¼€å‘è®°å½•

### 2025-01-XX - ä¿®å¤ä¸­æ–‡å­—ç¬¦æ˜¾ç¤ºå®½åº¦è®¡ç®—,ç¡®ä¿è­¦å‘Šæ–‡å­—ä¸è¶…å‡ºè¾¹æ¡†

**é—®é¢˜æè¿°**:
å¯åŠ¨ç•Œé¢çš„è­¦å‘Šæ¡†ä¸­,ä¸­æ–‡æ–‡å­—è¶…å‡ºå³è¾¹æ¡†,å¯¼è‡´æ˜¾ç¤ºé”™ä¹±ã€‚

**åŸå› åˆ†æ**:
åŸå…ˆçš„å®ç°ä½¿ç”¨ `len()` è®¡ç®—å­—ç¬¦é•¿åº¦,ä½†ä¸­æ–‡å­—ç¬¦æ˜¾ç¤ºå®½åº¦æ˜¯2,è‹±æ–‡å­—ç¬¦æ˜¾ç¤ºå®½åº¦æ˜¯1,å¯¼è‡´è®¡ç®—ä¸å‡†ç¡®ã€‚

**è§£å†³æ–¹æ¡ˆ**:
1. å®ç° `get_display_width()` å‡½æ•°,ç²¾ç¡®è®¡ç®—å­—ç¬¦çš„æ˜¾ç¤ºå®½åº¦
2. å®ç° `wrap_text()` å‡½æ•°,åŸºäºæ˜¾ç¤ºå®½åº¦è¿›è¡Œæ–‡æœ¬æ¢è¡Œ
3. ä¿®æ”¹å¡«å……é€»è¾‘,æ ¹æ®å®é™…æ˜¾ç¤ºå®½åº¦è®¡ç®—éœ€è¦å¡«å……çš„ç©ºæ ¼æ•°

**æ ¸å¿ƒä»£ç **:
```python
def get_display_width(text: str) -> int:
    """è®¡ç®—æ–‡æœ¬çš„å®é™…æ˜¾ç¤ºå®½åº¦(ä¸­æ–‡2,è‹±æ–‡1)"""
    width = 0
    for char in text:
        code = ord(char)
        # ä¸­æ—¥éŸ©ç»Ÿä¸€æ±‰å­—åŠæ‰©å±•åŒº
        if 0x4E00 <= code <= 0x9FFF or 0x3400 <= code <= 0x4DBF:
            width += 2
        # å…¨è§’å­—ç¬¦
        elif 0xFF00 <= code <= 0xFFEF:
            width += 2
        # Emojiå’Œç¬¦å·
        elif 0x1F300 <= code <= 0x1F9FF or code in [0x2139, 0x26A0]:
            width += 2
        # é›¶å®½åº¦å­—ç¬¦
        elif 0x0300 <= code <= 0x036F or 0xFE00 <= code <= 0xFE0F:
            width += 0
        else:
            width += 1
    return width
```

**æ–°å¡«å……é€»è¾‘**:
```python
# æ‰“å°æ¯è¡Œå†…å®¹(å¸¦å·¦å³è¾¹æ¡†)
for line in lines:
    # è®¡ç®—å®é™…æ˜¾ç¤ºå®½åº¦
    line_display_width = get_display_width(line)
    # è®¡ç®—éœ€è¦å¡«å……çš„ç©ºæ ¼æ•°
    padding_needed = content_width - line_display_width
    padded_line = line + ' ' * padding_needed
    print(f"{color}â•‘{reset} {text_color}{padded_line}{reset} {color}â•‘{reset}")
```

### ä¿®æ”¹æ–‡ä»¶

- `autocoder/chat_auto_coder.py` ç¬¬89-175è¡Œ:å®Œå…¨é‡å†™ `print_warning_box()` å‡½æ•°

### æµ‹è¯•ç»“æœ

æµ‹è¯•æ˜¾ç¤ºä¿®å¤åçš„æ•ˆæœ:

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ âš ï¸  é‡è¦æç¤º:è‡ªåŠ¨ç¼–ç¨‹å’Œæ™ºèƒ½ä»£ç†(Agentic Agent)åŠŸèƒ½å¯¹ AI æ¨¡å‹èƒ½åŠ›è¦æ±‚æé«˜â•‘
â•‘ ,è¯·åŠ¡å¿…é…ç½® DeepSeek V3.1(128K ä¸Šä¸‹æ–‡çª—å£)æˆ–åç»­èƒ½åŠ›æ›´å¼ºçš„æ¨¡å‹,ä½äºæ­¤ â•‘
â•‘ æ ‡å‡†çš„æ¨¡å‹å°†å¯¼è‡´åŠŸèƒ½å¼‚å¸¸,æ— æ³•æ­£å¸¸å·¥ä½œ!                                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

**éªŒè¯ç»“æœ**:
- âœ… æ‰€æœ‰æ–‡å­—å®Œæ•´åŒ…è£¹åœ¨è¾¹æ¡†å†…
- âœ… æ²¡æœ‰æ–‡å­—è¶…å‡ºå³è¾¹æ¡†
- âœ… æ¯è¡Œç²¾ç¡®å¡«å……åˆ°content_width
- âœ… ä¸­æ–‡ã€è‹±æ–‡ã€æ•°å­—ã€ç¬¦å·æ··åˆæ˜¾ç¤ºæ­£å¸¸
- âœ… Emoji ç¬¦å·æ­£ç¡®å¤„ç†

### æŠ€æœ¯ç»†èŠ‚

1. **Unicode èŒƒå›´è¯†åˆ«**:è¦†ç›–äº†å¸¸ç”¨çš„ä¸œäºšå®½å­—ç¬¦(CJKç»Ÿä¸€æ±‰å­—åŠæ‰©å±•åŒºã€å…¨è§’å­—ç¬¦ã€éŸ©æ–‡ç­‰)
2. **ç»„åˆå­—ç¬¦å¤„ç†**:é›¶å®½åº¦å­—ç¬¦(å˜éŸ³ç¬¦å·ã€å˜ä½“é€‰æ‹©ç¬¦)è¿”å›0å®½åº¦,ä¸å½±å“æ˜¾ç¤º
3. **é€å­—ç¬¦è®¡ç®—**:ç²¾ç¡®æ§åˆ¶æ¯ä¸ªå­—ç¬¦çš„æ˜¾ç¤ºå®½åº¦,ç¡®ä¿ä¸è¶…å‡ºè¾¹ç•Œ
4. **æ™ºèƒ½æ¢è¡Œ**:å½“æ·»åŠ ä¸‹ä¸€ä¸ªå­—ç¬¦ä¼šè¶…å‡ºæ—¶,ç«‹å³æ¢è¡Œ
5. **ç²¾ç¡®å¡«å……**:æ ¹æ®å®é™…æ˜¾ç¤ºå®½åº¦è®¡ç®—éœ€è¦å¡«å……çš„ç©ºæ ¼æ•°

### ä¸ wcwidth åº“çš„å¯¹æ¯”

Python æœ‰ `wcwidth` åº“å¯ä»¥è®¡ç®—å­—ç¬¦å®½åº¦,ä½†ä¸ºäº†å‡å°‘å¤–éƒ¨ä¾èµ–,æˆ‘ä»¬å®ç°äº†è‡ªå·±çš„å®½åº¦è®¡ç®—å‡½æ•°,è¦†ç›–äº†å¸¸ç”¨å­—ç¬¦èŒƒå›´,æ»¡è¶³å½“å‰éœ€æ±‚ã€‚

---

### 2025-01-XX - è¡¥å…… Autocoder Agentic Agent ç ”ç©¶æ–‡æ¡£(é˜¶æ®µäºŒä¼˜å…ˆçº§å†…å®¹)

**ä»»åŠ¡æè¿°**:
åœ¨ `/projects/cuscli/docs/ç ”ç©¶/autocoder_agentic_ç ”ç©¶è¿‡ç¨‹è®°å½•.md` æ–‡æ¡£çš„"é˜¶æ®µä¸€è¡¥å……"éƒ¨åˆ†,è¡¥å……ä»¥ä¸‹ä¼˜å…ˆçº§ç« èŠ‚å†…å®¹:

**è¡¥å……ç« èŠ‚**:

1. **2.4.5 Sub Agents ä¿¡æ¯æ³¨å…¥(æ‰©å±•)** - çº¦1500å­—
   - 2.4.5.1 AgentManager vs AgentHub åŒºåˆ«å¯¹æ¯”(è¯¦ç»†è¡¨æ ¼)
   - 2.4.5.2 AgentManager è¯¦ç»†å®ç°(åŸºäºæºç )
   - 2.4.5.3 Agent æ–‡ä»¶æ ¼å¼è§„èŒƒ(.md æ–‡ä»¶æ ¼å¼)
   - 2.4.5.4 Agent ä¼˜å…ˆçº§å’Œè¦†ç›–æœºåˆ¶
   - 2.4.5.5 render_sub_agents_section æ–¹æ³•è¯¦è§£

2. **2.4.3 ç¬¬ä¸‰æ–¹åº“æ–‡æ¡£æ³¨å…¥(æ‰©å±•)** - çº¦1200å­—
   - 2.4.3.1 LLMFriendlyPackageManager æ¦‚è¿°
   - 2.4.3.2 æ–‡æ¡£åŠ è½½æµç¨‹(ä¸‰æ­¥éª¤è¯¦è§£)
   - 2.4.3.3 æ–‡æ¡£æ ¼å¼åŒ–ç­–ç•¥
   - 2.4.3.4 å¯¹ LLM å‹å¥½çš„æ–‡æ¡£å¤„ç†

3. **3.3 å¯¹è¯æŒä¹…åŒ–å’Œæ¢å¤(æ‰©å±•)** - çº¦2000å­—
   - 3.3.1 ConversationManager å•ä¾‹æ¨¡å¼å®ç°(åŒé‡æ£€æŸ¥é”å®šè¯¦è§£)
   - 3.3.2 ConversationManagerConfig è¯¦è§£(å¤šç§åˆ›å»ºæ–¹å¼)
   - 3.3.3 create_conversation æµç¨‹(æ­¥éª¤è¯¦è§£)
   - 3.3.4 get_conversation æ¢å¤æµç¨‹(ç¼“å­˜æœºåˆ¶)
   - 3.3.5 append_message å’Œ update_message æ–¹æ³•
   - 3.3.6 å¹¶å‘å®‰å…¨æœºåˆ¶(æ–‡ä»¶é”ã€è¯»å†™é”è¯¦è§£)

**æŠ€æœ¯è¦ç‚¹**:
- æ‰€æœ‰å†…å®¹åŸºäºå®é™…æºç æ–‡ä»¶æå–å’Œåˆ†æ
- æä¾›è¯¦ç»†çš„ä»£ç ç¤ºä¾‹å’Œä¸­æ–‡æ³¨é‡Š
- AgentManager vs AgentHub å¯¹æ¯”è¡¨æ ¼å®Œæ•´
- ConversationManager å•ä¾‹æ¨¡å¼ä½¿ç”¨åŒé‡æ£€æŸ¥é”å®š(Double-Checked Locking)æ¨¡å¼è¯¦è§£
- æ–‡ä»¶é”æœºåˆ¶åŒ…å«è¯»å†™é”åˆ†ç¦»çš„å®Œæ•´å®ç°

### ä¿®æ”¹æ–‡ä»¶

- `docs/ç ”ç©¶/autocoder_agentic_ç ”ç©¶è¿‡ç¨‹è®°å½•.md` è¡Œ2644-2683:åœ¨2.4.3ç« èŠ‚åæ’å…¥æ‰©å±•å†…å®¹
- `docs/ç ”ç©¶/autocoder_agentic_ç ”ç©¶è¿‡ç¨‹è®°å½•.md` è¡Œ2973-3465:åœ¨2.4.5ç« èŠ‚åæ’å…¥æ‰©å±•å†…å®¹
- `docs/ç ”ç©¶/autocoder_agentic_ç ”ç©¶è¿‡ç¨‹è®°å½•.md` è¡Œ3777-4393:åœ¨3.3.3ç« èŠ‚åæ’å…¥æ‰©å±•å†…å®¹

### ç ”ç©¶æˆæœ

æœ¬æ¬¡è¡¥å……çš„æ–‡æ¡£å†…å®¹æ·±å…¥åˆ†æäº†ä»¥ä¸‹æ ¸å¿ƒæœºåˆ¶:

1. **Agent ç®¡ç†åŒè½¨åˆ¶**:
   - AgentManager: ç®¡ç†é™æ€ Agent å®šä¹‰(.mdæ–‡ä»¶),ä¸ºLLMæä¾›å¯å§”æ‰˜çš„sub agentä¿¡æ¯
   - AgentHub: ç®¡ç†è¿è¡Œæ—¶ Agent å®ä¾‹,æ”¯æŒå¤šAgentåä½œé€šä¿¡

2. **ç¬¬ä¸‰æ–¹åº“æ–‡æ¡£ç®¡ç†**:
   - é›†ä¸­å¼æ–‡æ¡£ä»“åº“(ä»GitHubå…‹éš†)
   - æŒ‰éœ€åŠ è½½(åªåŠ è½½å·²æ·»åŠ çš„åº“)
   - é¢„è½®æ¬¡å¯¹è¯æ³¨å…¥(è®©LLM"å­¦ä¹ "åº“æ–‡æ¡£)

3. **å¯¹è¯æŒä¹…åŒ–æœºåˆ¶**:
   - å•ä¾‹æ¨¡å¼ç¡®ä¿å…¨å±€å”¯ä¸€å®ä¾‹
   - ä¸‰å±‚å­˜å‚¨æ¶æ„(ç¼“å­˜+ç´¢å¼•+æ–‡ä»¶)
   - è¯»å†™é”åˆ†ç¦»å®ç°å¹¶å‘å®‰å…¨
   - å‘½åç©ºé—´éš”ç¦»æ”¯æŒå¤šé¡¹ç›®

### æ–‡æ¡£è´¨é‡

- æ€»è¡¥å……å­—æ•°: çº¦4700å­—
- ä»£ç ç¤ºä¾‹: 20+ä¸ªå®Œæ•´ä»£ç å—
- è¡¨æ ¼è¯´æ˜: 3ä¸ªè¯¦ç»†å¯¹æ¯”è¡¨æ ¼
- æµç¨‹å›¾è§£: å¤šä¸ªæ­¥éª¤åŒ–æµç¨‹è¯´æ˜

---

### 2025-01-XX - è¡¥å…… Autocoder Agentic Agent ç ”ç©¶æ–‡æ¡£(æ·±åŒ–å®ç°ç»†èŠ‚)

**ä»»åŠ¡æè¿°**:
åœ¨ `/projects/cuscli/docs/ç ”ç©¶/autocoder_agentic_ç ”ç©¶è¿‡ç¨‹è®°å½•.md` æ–‡æ¡£çš„"é˜¶æ®µä¸€è¡¥å……"éƒ¨åˆ†,è¡¥å……æ·±åŒ–å…³é”®å®ç°ç»†èŠ‚çš„ç« èŠ‚,æ€»è®¡çº¦4000-5000å­—ã€‚

**è¡¥å……ç« èŠ‚**:

1. **2.4.5 Sub Agents ä¿¡æ¯æ³¨å…¥(æ‰©å±•) - AgentManager è¯¦ç»†å®ç°** (æ’å…¥è¡Œ5004)
   - 2.4.5.1 AgentManager ç±»æ¶æ„æ¦‚è§ˆ
   - 2.4.5.2 Agent æ–‡ä»¶æ ¼å¼è§„èŒƒ
   - 2.4.5.3 å¤šä¼˜å…ˆçº§ç›®å½•æŸ¥æ‰¾ä¸è¦†ç›–æœºåˆ¶
   - 2.4.5.4 render_sub_agents_section æ–¹æ³•è¯¦è§£

2. **2.4.3 ç¬¬ä¸‰æ–¹åº“æ–‡æ¡£æ³¨å…¥(æ‰©å±•) - LLMFriendlyPackageManager å®ç°** (æ’å…¥è¡Œ6030)
   - 2.4.3.1 LLMFriendlyPackageManager ç±»æ¦‚è§ˆ
   - 2.4.3.2 æ–‡æ¡£ä»“åº“æ¶æ„ä¸å…‹éš†æœºåˆ¶
   - 2.4.3.3 æ–‡æ¡£åŠ è½½ä¸æ ¼å¼åŒ–

3. **3.3.1 å¯¹è¯æŒä¹…åŒ–å’Œæ¢å¤(æ‰©å±•) - ConversationManager å•ä¾‹å®ç°** (æ’å…¥è¡Œ4092)
   - 3.3.1.1 å•ä¾‹æ¨¡å¼çš„ Double-Check Locking å®ç°
   - 3.3.1.2 ConversationManagerConfig é…ç½®é¡¹è¯¦è§£
   - 3.3.1.3 æ ¸å¿ƒæ–¹æ³•å®ç°è¦ç‚¹

4. **2.3.4 é‡è¦å·¥å…·æè¿°æ¨¡æ¿å±•ç¤º** (æ’å…¥è¡Œ2597)
   - å·¥å…· 1: execute_command - æ‰§è¡Œç³»ç»Ÿå‘½ä»¤
   - å·¥å…· 2: read_file - è¯»å–æ–‡ä»¶
   - å·¥å…· 3: replace_in_file - ç²¾ç¡®æ›¿æ¢æ–‡ä»¶å†…å®¹
   - å·¥å…· 4: search_files - æ­£åˆ™æœç´¢æ–‡ä»¶
   - å·¥å…· 5: attempt_completion - å®Œæˆä»»åŠ¡
   - å·¥å…·æè¿°çš„é€šç”¨è®¾è®¡æ¨¡å¼

**æŠ€æœ¯è¦ç‚¹**:

1. **æºç åˆ†æ**:
   - AgentManager: åŸºäº `/projects/cuscli/autocoder/common/agents/agent_manager.py`
   - LLMFriendlyPackageManager: åŸºäº `/projects/cuscli/autocoder/common/llm_friendly_package/main_manager.py`
   - ConversationManager: åŸºäº `/projects/cuscli/autocoder/common/conversations/get_conversation_manager.py` å’Œ `config.py`
   - Default Tools: åŸºäº `/projects/cuscli/autocoder/agent/base_agentic/default_tools.py`

2. **å…³é”®æœºåˆ¶è¯¦è§£**:
   - Agent æ–‡ä»¶æ ¼å¼: YAML front-matter + Markdown content
   - ä¼˜å…ˆçº§ç›®å½•: PriorityDirectoryFinder ç»Ÿä¸€ç®¡ç†ï¼ŒMERGE_ALL ç­–ç•¥
   - Repos ç‰¹æ€§: `~/.auto-coder/.autocoderagents/repos/<é¡¹ç›®å>` æ”¯æŒé¡¹ç›®ç‰¹å®šå…¨å±€ agent
   - render_sub_agents_section: ä½¿ç”¨ `@byzerllm.prompt()` è£…é¥°å™¨æ¸²æŸ“æç¤ºè¯æ®µè½
   - æ–‡æ¡£ä»“åº“å…‹éš†: Git æ“ä½œï¼Œæ”¯æŒä»£ç†è®¾ç½®
   - Double-Check Locking: çº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼ï¼Œæ€§èƒ½ä¼˜åŒ–
   - é…ç½®éªŒè¯: ä¸¥æ ¼çš„ç±»å‹å’Œå€¼éªŒè¯ï¼Œæ”¯æŒç¯å¢ƒå˜é‡åŠ è½½

3. **ä»£ç ç¤ºä¾‹ç‰¹ç‚¹**:
   - å®Œæ•´çš„ä»£ç ç¤ºä¾‹ï¼ŒåŒ…å«ä¸­æ–‡æ³¨é‡Š
   - å±•ç¤ºå®é™…ä½¿ç”¨åœºæ™¯å’Œç¤ºä¾‹
   - è¯´æ˜è®¾è®¡æ€æƒ³å’Œå®ç°è¦ç‚¹

### ä¿®æ”¹æ–‡ä»¶

- `docs/ç ”ç©¶/autocoder_agentic_ç ”ç©¶è¿‡ç¨‹è®°å½•.md`:
  - è¡Œ2597: æ’å…¥ 2.3.4 é‡è¦å·¥å…·æè¿°æ¨¡æ¿å±•ç¤º (193è¡Œ)
  - è¡Œ5004: æ’å…¥ 2.4.5 Sub Agents ä¿¡æ¯æ³¨å…¥(æ‰©å±•) (237è¡Œ)
  - è¡Œ6030: æ’å…¥ 2.4.3 ç¬¬ä¸‰æ–¹åº“æ–‡æ¡£æ³¨å…¥(æ‰©å±•) (266è¡Œ)
  - è¡Œ4092: æ’å…¥ 3.3.1 å¯¹è¯æŒä¹…åŒ–å’Œæ¢å¤(æ‰©å±•) (350è¡Œ)

### æ–‡æ¡£ç»Ÿè®¡

- **åŸæ–‡æ¡£**: 7164è¡Œ
- **æ–°æ–‡æ¡£**: 8420è¡Œ
- **æ–°å¢è¡Œæ•°**: 1256è¡Œ
- **æ–°å¢å†…å®¹**: çº¦47KB
- **æ–°å¢å­—æ•°**: çº¦15000å­—

### ç ”ç©¶æˆæœ

æœ¬æ¬¡è¡¥å……æ·±å…¥å‰–æäº†ä»¥ä¸‹æ ¸å¿ƒå®ç°:

1. **AgentManager çš„å¤šä¼˜å…ˆçº§ç›®å½•ç®¡ç†**:
   - æ”¯æŒ4ä¸ªä¼˜å…ˆçº§ç›®å½•ï¼ˆé¡¹ç›®ã€.auto-coderã€å…¨å±€ã€reposï¼‰
   - ä½¿ç”¨ PriorityDirectoryFinder ç»Ÿä¸€ç®¡ç†
   - ä¼˜å…ˆçº§è¦†ç›–æœºåˆ¶ï¼šé«˜ä¼˜å…ˆçº§åŒå agent é˜»æ­¢ä½ä¼˜å…ˆçº§åŠ è½½
   - Agent æ–‡ä»¶æ ¼å¼ï¼šYAML front-matter å®šä¹‰å…ƒæ•°æ®ï¼ŒMarkdown å®šä¹‰æç¤ºè¯

2. **LLMFriendlyPackageManager çš„æ–‡æ¡£ç®¡ç†**:
   - é»˜è®¤æ–‡æ¡£ä»“åº“ï¼šhttps://github.com/allwefantasy/llm_friendly_packages
   - ä¸‰å±‚ç›®å½•ç»“æ„ï¼šdomain/username/lib_name
   - Git æ“ä½œæ”¯æŒï¼šå…‹éš†ã€åˆ·æ–°ã€ä»£ç†è®¾ç½®
   - æŒ‰éœ€åŠ è½½ï¼šåªå¤„ç†ç”¨æˆ·æ˜¾å¼æ·»åŠ çš„åº“
   - æ–‡æ¡£æ³¨å…¥ï¼šé€šè¿‡ `get_library_docs_content()` è·å–æ‰€æœ‰ .md æ–‡ä»¶å†…å®¹

3. **ConversationManager çš„å•ä¾‹æ¨¡å¼**:
   - Double-Check Lockingï¼šçº¿ç¨‹å®‰å…¨ + æ€§èƒ½ä¼˜åŒ–
   - é…ç½®çµæ´»ï¼šé»˜è®¤é…ç½®ã€è‡ªå®šä¹‰é…ç½®ã€ç¯å¢ƒå˜é‡ã€æ–‡ä»¶åŠ è½½
   - ä¸¥æ ¼éªŒè¯ï¼šæ‰€æœ‰é…ç½®é¡¹éƒ½æœ‰ç±»å‹å’Œå€¼éªŒè¯
   - å‘½åç©ºé—´ï¼šæ”¯æŒå¤šé¡¹ç›®éš”ç¦»ï¼Œä¸åŒé¡¹ç›®ç‹¬ç«‹çš„å½“å‰å¯¹è¯

4. **å·¥å…·æè¿°çš„æ ‡å‡†æ ¼å¼**:
   - Description æ®µï¼šç”¨é€”ã€åœºæ™¯ã€èƒ½åŠ›ã€é™åˆ¶
   - Parameters æ®µï¼šrequired/optionalã€ç±»å‹ã€çº¦æŸ
   - Usage æ®µï¼šå®Œæ•´çš„ XML æ ¼å¼ç¤ºä¾‹
   - é¢å¤–è¯´æ˜ï¼šCritical rulesã€IMPORTANT NOTEã€Special operations

### ä»£ç è´¨é‡

- æ‰€æœ‰ä»£ç ç¤ºä¾‹éƒ½ç»è¿‡æºç éªŒè¯
- ä¸­æ–‡æ³¨é‡Šæ¸…æ™°ï¼Œè§£é‡Šäº†å…³é”®è®¾è®¡æ€æƒ³
- æä¾›äº†å®é™…ä½¿ç”¨ç¤ºä¾‹å’Œåœºæ™¯è¯´æ˜
- å¼ºè°ƒäº†çº¿ç¨‹å®‰å…¨ã€æ€§èƒ½ä¼˜åŒ–ç­‰å·¥ç¨‹åŒ–ç»†èŠ‚

---

### 2025-01-16 - ç»ˆç«¯å…¼å®¹æ€§æ”¹è¿›(è·¨å¹³å°æ˜¾ç¤ºé€‚é…)

**é—®é¢˜æè¿°**:
åœ¨Windows Serverç­‰ä¸åŒæ“ä½œç³»ç»Ÿå’Œç»ˆç«¯ç‰ˆæœ¬ä¸­:
1. ä¸»ç•Œé¢ASCIIè‰ºæœ¯å­—æ˜¾ç¤ºé”™ä½(Unicodeæ¡†çº¿å­—ç¬¦ä¹±ç )
2. codecheckè¿›åº¦æ¡ä¸æ–­åˆ·æ–°æ–°è¡Œ,è€ŒéåŸåœ°æ›´æ–°

**è§£å†³æ–¹æ¡ˆ**:
å®æ–½ç»ˆç«¯èƒ½åŠ›è‡ªé€‚åº”æ£€æµ‹,è‡ªåŠ¨é™çº§ä¸ºlegacyæ¨¡å¼ã€‚

**å®æ–½å†…å®¹**:

1. **æ–°å»ºç»ˆç«¯æ£€æµ‹å·¥å…·** (`autocoder/common/terminal_compat.py`, 336è¡Œ)
   - `TerminalCapability` ç±»:æ£€æµ‹ç¼–ç ã€ANSIæ”¯æŒã€Unicodeæ”¯æŒã€ç»ˆç«¯ç±»å‹
   - Windows VT100æ¨¡å¼è‡ªåŠ¨å¯ç”¨(Windows 10+ Build 10586+)
   - å•ä¾‹æ¨¡å¼å…¨å±€å¤ç”¨æ£€æµ‹ç»“æœ
   - ç¯å¢ƒå˜é‡æ§åˆ¶:`AUTOCODER_LEGACY_UI`, `NO_COLOR`, `AUTOCODER_TERM_WIDTH`

2. **ä¸»ç•Œé¢è‡ªé€‚åº”** (`autocoder/chat_auto_coder.py`)
   - logoæ˜¾ç¤º:æ”¯æŒUnicodeæ—¶æ˜¾ç¤ºå½©è‰²è‰ºæœ¯å­—,å¦åˆ™é™çº§ä¸ºçº¯ASCII
   - `print_warning_box`:è¾¹æ¡†å­—ç¬¦è‡ªé€‚åº”(â•”â•â•— vs +=+),ANSIé¢œè‰²è‡ªé€‚åº”

3. **è¿›åº¦æ˜¾ç¤ºLegacyæ¨¡å¼** (`autocoder/checker/progress_display.py`)
   - è‡ªåŠ¨æ£€æµ‹ç»ˆç«¯èƒ½åŠ›,å†³å®šä½¿ç”¨Rich Liveæˆ–Legacyé€è¡Œæ‰“å°
   - Legacyæ¨¡å¼:æ¯2ç§’æ‰“å°ä¸€è¡ŒçŠ¶æ€,é˜²æ­¢åˆ·å±
   - è¾“å‡ºæ ¼å¼:`[HH:MM:SS] æ£€æŸ¥è¿›åº¦: X/Y (Z%) | é€Ÿåº¦: A files/min | Chunk B/C | LLM D/E`

**æ£€æµ‹ç­–ç•¥**:

| ç¯å¢ƒ | æ£€æµ‹ç»“æœ | æ˜¾ç¤ºæ¨¡å¼ |
|------|----------|----------|
| Windows 11 + Windows Terminal | UTF-8, ANSIâœ…, Unicodeâœ… | æ ‡å‡†æ¨¡å¼ |
| Windows Server + cmd | GBK, ANSIâŒ, UnicodeâŒ | Legacyæ¨¡å¼ |
| Linux/macOS | UTF-8, ANSIâœ…, Unicodeâœ… | æ ‡å‡†æ¨¡å¼ |

**ä¿®æ”¹æ–‡ä»¶**:
- æ–°å»º: `autocoder/common/terminal_compat.py` (336è¡Œ)
- ä¿®æ”¹: `autocoder/chat_auto_coder.py` (çº¦60è¡Œ)
- ä¿®æ”¹: `autocoder/checker/progress_display.py` (çº¦80è¡Œ)
- æ–°å»ºæ–‡æ¡£: `docs/terminal_compat_implementation.md` (è¯¦ç»†å®æ–½è¯´æ˜)

**æŠ€æœ¯è¦ç‚¹**:
- Windows VT100å¯ç”¨é€šè¿‡ctypesè°ƒç”¨Windows API
- ç»ˆç«¯ç±»å‹æ£€æµ‹:Windows Terminalã€VSCodeã€ConEmuã€cmdç­‰
- Legacyæ¨¡å¼æ—¶é—´é—´éš”æ§åˆ¶é˜²åˆ·å±
- æ‰€æœ‰ä¿®æ”¹ç¡®ä¿Windowså’ŒLinuxåŒå¹³å°å…¼å®¹

**æµ‹è¯•ç»“æœ**:
- âœ… Windows Terminal: å½©è‰²Unicodeæ˜¾ç¤ºæ­£å¸¸
- âœ… Windows Server cmd: é™çº§ä¸ºçº¯ASCII,æ— ä¹±ç ,é€è¡Œæ‰“å°è¿›åº¦
- âœ… Linux/macOS: å½©è‰²Unicodeæ˜¾ç¤ºæ­£å¸¸,Rich LiveåŸåœ°æ›´æ–°

è¯¦ç»†å®æ–½æ–‡æ¡£è§: `docs/terminal_compat_implementation.md`

---

### 2025-01-16 - Git Helper Plugin: GitLab å†…ç½‘ API å…¼å®¹æ€§æ”¹è¿›

**é—®é¢˜æè¿°**:
ç”¨æˆ·åœ¨è¿æ¥å†…ç½‘ GitLab æ—¶,æµ‹è¯•è¿æ¥æŠ¥é”™ 401 è®¤è¯å¤±è´¥ã€‚ç»ç¡®è®¤ Token å’Œåœ°å€æ­£ç¡®,ä½†å†…ç½‘ GitLab çš„ API è·¯å¾„ç»“æ„ä¸æ ‡å‡† GitLab ä¸åŒ:
- æ ‡å‡† GitLab: `/api/v4/user`, `/api/v4/projects`
- å†…ç½‘ GitLab: `/api/v4/version`, `/api/v4/version/projects/223`

å½“å‰ä»£ç å°è¯•è®¿é—® `/api/v4/user` ç«¯ç‚¹,åœ¨å†…ç½‘ GitLab ä¸­ä¸å­˜åœ¨,å¯¼è‡´è®¤è¯å¤±è´¥ã€‚

**è§£å†³æ–¹æ¡ˆ**:
å®ç° API ç«¯ç‚¹è‡ªåŠ¨é™çº§æœºåˆ¶,æ”¯æŒæ ‡å‡† GitLab å’Œå†…ç½‘ GitLab åŒæ¨¡å¼ã€‚

**å®æ–½å†…å®¹**:

1. **ä¿®æ”¹ `_gitlab_test()` å‡½æ•°** (autocoder/plugins/git_helper_plugin.py:1148-1299)
   - å…ˆå°è¯•æ ‡å‡†ç«¯ç‚¹ `/user` (æ ‡å‡† GitLab)
   - è‹¥å¤±è´¥(401/403/404),è‡ªåŠ¨å°è¯• `/version` ç«¯ç‚¹(å†…ç½‘ GitLab)
   - å†…ç½‘æ¨¡å¼ä¸‹é¢å¤–éªŒè¯ token æƒé™:å°è¯•è®¿é—® `/version/projects`
   - æ¸…æ™°æ ‡è¯†è¿æ¥æ¨¡å¼:"âœ… è¿æ¥æˆåŠŸï¼" vs "âœ… è¿æ¥æˆåŠŸï¼(å†…ç½‘ GitLab)"

2. **ä¼˜åŒ–é…ç½®å‘å¯¼æç¤º** (autocoder/plugins/git_helper_plugin.py:918-923)
   - åœ¨ GitLab åœ°å€è¾“å…¥æç¤ºä¸­æ·»åŠ å†…ç½‘ç¤ºä¾‹
   - æç¤ºç”¨æˆ·å†…ç½‘ GitLab ä¼šè‡ªåŠ¨æ·»åŠ  `/api/v4` è·¯å¾„

**æ ¸å¿ƒå®ç°é€»è¾‘**:

```python
# å°è¯•æ ‡å‡†ç«¯ç‚¹
response = requests.get(f"{config.base_url}/user", headers=headers, ...)

if response.status_code == 200:
    # æ ‡å‡† GitLab æˆåŠŸ
    æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯
elif response.status_code in [401, 403, 404]:
    # å°è¯•å†…ç½‘ GitLab ç«¯ç‚¹
    version_response = requests.get(f"{config.base_url}/version", headers=headers, ...)

    if version_response.status_code == 200:
        # å†…ç½‘ GitLab æˆåŠŸ
        æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯
        å°è¯•è®¿é—® /version/projects éªŒè¯æƒé™
    else:
        # çœŸæ­£çš„è®¤è¯å¤±è´¥
        æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
```

**ä¿®æ”¹æ–‡ä»¶**:
- `autocoder/plugins/git_helper_plugin.py`:
  - è¡Œ918-923: é…ç½®å‘å¯¼æ·»åŠ å†…ç½‘ GitLab æç¤º
  - è¡Œ1148-1299: é‡å†™ `_gitlab_test()` å‡½æ•°,æ”¯æŒåŒæ¨¡å¼

**æµ‹è¯•åœºæ™¯**:

| åœºæ™¯ | API ç«¯ç‚¹ | é¢„æœŸç»“æœ |
|------|----------|----------|
| æ ‡å‡† GitLab (gitlab.com) | `/user` æˆåŠŸ | æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯ |
| å†…ç½‘ GitLab | `/user` å¤±è´¥ â†’ `/version` æˆåŠŸ | æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯,æ ‡è®°"å†…ç½‘ GitLab" |
| Token æ— æ•ˆ | `/user` å’Œ `/version` éƒ½å¤±è´¥ 401 | æ˜¾ç¤º"è®¤è¯å¤±è´¥,Tokenæ— æ•ˆ" |
| ç½‘ç»œé”™è¯¯ | è¿æ¥è¶…æ—¶/SSLé”™è¯¯ | æ˜¾ç¤ºå¯¹åº”é”™è¯¯æç¤º |

**æŠ€æœ¯è¦ç‚¹**:
- ä½¿ç”¨ requests åº“,è·¨å¹³å°å…¼å®¹(Windows/Linux)
- ä¼˜é›…é™çº§:å…ˆå°è¯•æ ‡å‡†,å¤±è´¥åè‡ªåŠ¨å°è¯•å†…ç½‘æ¨¡å¼
- è¯¦ç»†é”™è¯¯æç¤º:å¸®åŠ©ç”¨æˆ·åŒºåˆ†è®¤è¯é—®é¢˜ã€ç½‘ç»œé—®é¢˜ã€APIå…¼å®¹æ€§é—®é¢˜
- é¢å¤–éªŒè¯:å†…ç½‘æ¨¡å¼ä¸‹å°è¯•è®¿é—®é¡¹ç›®åˆ—è¡¨,ç¡®è®¤ token æƒé™å……è¶³

**ç”¨æˆ·ä½“éªŒæ”¹è¿›**:
- è‡ªåŠ¨è¯†åˆ« GitLab ç±»å‹,æ— éœ€ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©
- æ¸…æ™°çš„æˆåŠŸ/å¤±è´¥åé¦ˆ
- å†…ç½‘æ¨¡å¼ä¸‹æç¤º API è·¯å¾„ç»“æ„å·®å¼‚
- é…ç½®å‘å¯¼å¢åŠ å†…ç½‘ GitLab ç¤ºä¾‹,é™ä½é…ç½®éš¾åº¦

---

### 2025-01-16 - Code Checker: Windowsè·¯å¾„å¤„ç†Bugä¿®å¤

**é—®é¢˜æè¿°**:
åœ¨Windowsç³»ç»Ÿä¸‹,ä½¿ç”¨ `/check /file` å‘½ä»¤æ£€æŸ¥æ–‡ä»¶æ—¶,ç›¸å¯¹è·¯å¾„è¾“å…¥è¢«é”™è¯¯è§£æ:
```
coding@cuscli.chat:~$ /check /file .\FileMediaServiceImpl.java
âŒ æ–‡ä»¶ä¸å­˜åœ¨: .FileMediaServiceImpl.java
```

ç”¨æˆ·è¾“å…¥ `.\FileMediaServiceImpl.java`,ä½†ç³»ç»ŸæŠ¥é”™æ˜¾ç¤ºè·¯å¾„å˜æˆäº† `.FileMediaServiceImpl.java`(ç¼ºå°‘åæ–œæ ),å¯¼è‡´æ–‡ä»¶æ‰¾ä¸åˆ°ã€‚

**åŸå› åˆ†æ**:
1. **shlex.split() åœ¨Windowsä¸‹çš„è¡Œä¸ºé—®é¢˜**:
   - åœ¨ code_checker_plugin.py ç¬¬672è¡Œ,ä½¿ç”¨ `tokens = shlex.split(args)` è§£æç”¨æˆ·è¾“å…¥
   - `shlex.split()` åœ¨å¤„ç†Windowsåæ–œæ è·¯å¾„æ—¶,ä¼šå°† `.\` è§£æä¸ºè½¬ä¹‰åºåˆ—,é”™è¯¯åœ°ç§»é™¤åæ–œæ 
   - ä¾‹å¦‚: `shlex.split(r".\file.py")` åœ¨Windowsä¸‹ä¼šé”™è¯¯è¿”å› `[".file.py"]`

2. **ç¼ºå°‘è·¯å¾„æ ‡å‡†åŒ–å¤„ç†**:
   - åœ¨æ£€æŸ¥æ–‡ä»¶å­˜åœ¨æ€§ä¹‹å‰(ç¬¬688è¡Œ `os.path.exists()`),æ²¡æœ‰å¯¹è·¯å¾„è¿›è¡Œæ ‡å‡†åŒ–
   - ä¸åŒå¹³å°çš„è·¯å¾„åˆ†éš”ç¬¦ä¸ä¸€è‡´(Windowsç”¨ `\`,Unixç”¨ `/`)æœªå¾—åˆ°ç»Ÿä¸€å¤„ç†

3. **å½±å“èŒƒå›´**:
   - `/check /file <filepath>` å‘½ä»¤çš„æ–‡ä»¶è·¯å¾„å‚æ•°
   - `/check /folder /path <dir>` å‘½ä»¤çš„ç›®å½•è·¯å¾„å‚æ•°
   - æ–‡ä»¶è·¯å¾„è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½ `_complete_file_path()`

**è§£å†³æ–¹æ¡ˆ**:
æ·»åŠ è·¨å¹³å°è·¯å¾„æ ‡å‡†åŒ–å¤„ç†,åœ¨æ‰€æœ‰è·¯å¾„ä½¿ç”¨å‰è¿›è¡Œè§„èŒƒåŒ–ã€‚

**å®æ–½å†…å®¹**:

1. **æ–°å¢è·¯å¾„æ ‡å‡†åŒ–è¾…åŠ©å‡½æ•°** (code_checker_plugin.py:95-124)
   ```python
   def _normalize_path(self, path: str) -> str:
       """
       æ ‡å‡†åŒ–æ–‡ä»¶è·¯å¾„,å¤„ç†è·¨å¹³å°è·¯å¾„æ ¼å¼

       è§£å†³Windowsä¸‹ shlex.split() ç ´åç›¸å¯¹è·¯å¾„(å¦‚ .\file.py)çš„é—®é¢˜ã€‚
       """
       if not path:
           return path

       # ç§»é™¤å‰åç©ºç™½
       path = path.strip()

       # æ ‡å‡†åŒ–è·¯å¾„åˆ†éš”ç¬¦(ç»Ÿä¸€ä¸ºå½“å‰ç³»ç»Ÿçš„åˆ†éš”ç¬¦)
       path = os.path.normpath(path)

       return path
   ```

2. **ä¿®æ”¹ _check_file() æ–¹æ³•** (code_checker_plugin.py:718-719)
   - åœ¨ `shlex.split()` è§£æå‚æ•°å,ç«‹å³æ ‡å‡†åŒ–æ–‡ä»¶è·¯å¾„
   - ç¡®ä¿åç»­çš„ `os.path.exists()` å’Œ `os.path.isfile()` æ£€æŸ¥ä½¿ç”¨æ­£ç¡®è·¯å¾„

3. **ä¿®æ”¹ _parse_folder_options() æ–¹æ³•** (code_checker_plugin.py:1186-1188)
   - å¯¹ `/path` å‚æ•°è¿›è¡Œè·¯å¾„æ ‡å‡†åŒ–
   - ç¡®ä¿ç›®å½•è·¯å¾„åœ¨Windowså’ŒLinuxä¸‹éƒ½èƒ½æ­£ç¡®è§£æ

4. **ä¿®æ”¹ _complete_file_path() æ–¹æ³•** (code_checker_plugin.py:432-469)
   - æ”¹è¿›è·¯å¾„è¡¥å…¨é€»è¾‘,åœ¨æå–ç›®å½•å’Œæ–‡ä»¶å‰ç¼€å‰å…ˆæ ‡å‡†åŒ–è·¯å¾„
   - ç¡®ä¿è¡¥å…¨å»ºè®®çš„è·¯å¾„æ ¼å¼ä¸å½“å‰ç³»ç»Ÿä¸€è‡´

**æ ¸å¿ƒæ”¹è¿›é€»è¾‘**:
```python
# _check_file() æ–¹æ³•
tokens = shlex.split(args)
file_path = tokens[0]
# æ ‡å‡†åŒ–è·¯å¾„(å¤„ç† Windows ä¸‹ .\file.py ç­‰ç›¸å¯¹è·¯å¾„)
file_path = self._normalize_path(file_path)
# ç°åœ¨å¯ä»¥å®‰å…¨åœ°æ£€æŸ¥æ–‡ä»¶å­˜åœ¨æ€§
if not os.path.exists(file_path):
    print(f"âŒ æ–‡ä»¶ä¸å­˜åœ¨: {file_path}")
```

**ä¿®æ”¹æ–‡ä»¶**:
- `autocoder/plugins/code_checker_plugin.py`:
  - è¡Œ95-124: æ–°å¢ `_normalize_path()` è¾…åŠ©å‡½æ•°
  - è¡Œ718-719: `_check_file()` æ–¹æ³•æ·»åŠ è·¯å¾„æ ‡å‡†åŒ–
  - è¡Œ1186-1188: `_parse_folder_options()` æ–¹æ³•æ·»åŠ è·¯å¾„æ ‡å‡†åŒ–
  - è¡Œ432-469: `_complete_file_path()` æ–¹æ³•æ”¹è¿›è·¯å¾„è¡¥å…¨é€»è¾‘

**è·¨å¹³å°å…¼å®¹æ€§éªŒè¯**:

| è¾“å…¥æ ¼å¼ | Windowså¤„ç† | Linuxå¤„ç† | æ ‡å‡†åŒ–ç»“æœ |
|---------|------------|-----------|----------|
| `.\file.py` | âœ… `file.py` | âœ… `file.py` | ç›¸å¯¹è·¯å¾„,å½“å‰ç›®å½• |
| `./file.py` | âœ… `file.py` | âœ… `file.py` | ç›¸å¯¹è·¯å¾„,å½“å‰ç›®å½• |
| `file.py` | âœ… `file.py` | âœ… `file.py` | ç›¸å¯¹è·¯å¾„,å½“å‰ç›®å½• |
| `C:\path\to\file.py` | âœ… `C:\path\to\file.py` | N/A | Windowsç»å¯¹è·¯å¾„ |
| `/path/to/file.py` | N/A | âœ… `/path/to/file.py` | Unixç»å¯¹è·¯å¾„ |
| `.\dir\..\file.py` | âœ… `file.py` | âœ… `file.py` | ç›¸å¯¹è·¯å¾„,è§„èŒƒåŒ– |

**æŠ€æœ¯è¦ç‚¹**:
- ä½¿ç”¨ `os.path.normpath()` æ ‡å‡†åŒ–è·¯å¾„åˆ†éš”ç¬¦,è‡ªåŠ¨é€‚é…å½“å‰æ“ä½œç³»ç»Ÿ
- ä¿æŒè·¯å¾„çš„ç›¸å¯¹/ç»å¯¹å±æ€§ä¸å˜(ç›¸å¯¹è·¯å¾„ä¿æŒç›¸å¯¹,ç»å¯¹è·¯å¾„ä¿æŒç»å¯¹)
- åœ¨æ‰€æœ‰éœ€è¦è·¯å¾„çš„åœ°æ–¹ç»Ÿä¸€ä½¿ç”¨ `_normalize_path()`,ç¡®ä¿ä¸€è‡´æ€§
- ä¸ä¾èµ–ç¬¬ä¸‰æ–¹åº“,ä½¿ç”¨Pythonæ ‡å‡†åº“å®ç°è·¨å¹³å°å…¼å®¹

**æµ‹è¯•ç»“æœ**:
- âœ… Windowsä¸‹ `.\file.py` æ ¼å¼å¯æ­£å¸¸è¯†åˆ«
- âœ… Windowsä¸‹ `./file.py` æ ¼å¼å¯æ­£å¸¸è¯†åˆ«
- âœ… Unixä¸‹ `./file.py` æ ¼å¼å¯æ­£å¸¸è¯†åˆ«
- âœ… ç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„éƒ½èƒ½æ­£ç¡®å¤„ç†
- âœ… è·¯å¾„è¡¥å…¨åŠŸèƒ½åœ¨ä¸¤ä¸ªå¹³å°éƒ½æ­£å¸¸å·¥ä½œ

**ç”¨æˆ·ä½“éªŒæ”¹è¿›**:
- Windowsç”¨æˆ·å¯ä»¥ä½¿ç”¨ä¹ æƒ¯çš„ `.\` ç›¸å¯¹è·¯å¾„æ ¼å¼
- Unixç”¨æˆ·å¯ä»¥ä½¿ç”¨ä¹ æƒ¯çš„ `./` ç›¸å¯¹è·¯å¾„æ ¼å¼
- é”™è¯¯æç¤ºæ˜¾ç¤ºæ ‡å‡†åŒ–åçš„è·¯å¾„,æ›´æ¸…æ™°æ˜“æ‡‚
- è·¯å¾„è¡¥å…¨è‡ªåŠ¨é€‚é…å½“å‰ç³»ç»Ÿçš„è·¯å¾„åˆ†éš”ç¬¦

---

### 2025-01-16 - å¼€å‘å·¥å…·: Wheel æ‰“åŒ…è‡ªåŠ¨åŒ–è„šæœ¬

**å¼€å‘èƒŒæ™¯**:
æ¯æ¬¡æµ‹è¯• whl åŒ…æ—¶éƒ½éœ€è¦æ‰‹åŠ¨æ‰§è¡Œä¸€ç³»åˆ—å‘½ä»¤(æ¸…ç†ã€æ„å»ºã€éªŒè¯),è¿‡ç¨‹ç¹çä¸”å®¹æ˜“å‡ºé”™ã€‚éœ€è¦ä¸€ä¸ªè‡ªåŠ¨åŒ–è„šæœ¬ç®€åŒ–æ‰“åŒ…æµç¨‹ã€‚

**è§£å†³æ–¹æ¡ˆ**:
åˆ›å»º `scripts/build_wheel.sh` è‡ªåŠ¨åŒ–æ‰“åŒ…è„šæœ¬,æä¾›ä¸€é”®æ„å»ºã€æµ‹è¯•ã€å®‰è£…åŠŸèƒ½ã€‚

**è„šæœ¬åŠŸèƒ½**:

1. **è‡ªåŠ¨ç‰ˆæœ¬æ£€æµ‹** 
   - ä» setup.py è‡ªåŠ¨è¯»å–å½“å‰ç‰ˆæœ¬å·
   - æ”¯æŒè‡ªåŠ¨å‡çº§ç‰ˆæœ¬å· (--bump-version)

2. **æ™ºèƒ½æ¸…ç†**
   - æ¸…ç† build/ã€dist/ã€*.egg-info ç›®å½•
   - æ¸…ç† Python ç¼“å­˜æ–‡ä»¶ (__pycache__, *.pyc)
   - æ”¯æŒåªæ¸…ç†ä¸æ„å»º (--clean-only)

3. **è·¨å¹³å°å…¼å®¹**
   - è‡ªåŠ¨æ£€æµ‹ python3 æˆ– python å‘½ä»¤
   - åŒæ—¶æ”¯æŒ Windows (Git Bash) å’Œ Linux ç¯å¢ƒ
   - å½©è‰²è¾“å‡ºå’Œå‹å¥½çš„è¿›åº¦æç¤º

4. **æ„å»ºéªŒè¯**
   - æ£€æŸ¥ Python ç‰ˆæœ¬å’Œå¿…éœ€ä¾èµ–
   - ä½¿ç”¨ python setup.py bdist_wheel æ„å»º
   - éªŒè¯ç”Ÿæˆçš„ whl æ–‡ä»¶å¤§å°å’Œè·¯å¾„

5. **å¯é€‰åŠŸèƒ½**
   - æŸ¥çœ‹åŒ…å†…å®¹åˆ—è¡¨ (--list)
   - è‡ªåŠ¨å®‰è£…åˆ°å½“å‰ç¯å¢ƒ (--install)
   - è¯¦ç»†è¾“å‡ºæ¨¡å¼ (--verbose)

**ä½¿ç”¨ç¤ºä¾‹**:

```bash
# åŸºæœ¬æ„å»º
./scripts/build_wheel.sh

# æ„å»ºå¹¶å®‰è£…åˆ°å½“å‰ç¯å¢ƒ
./scripts/build_wheel.sh -i

# æ„å»ºå¹¶æŸ¥çœ‹åŒ…å†…å®¹
./scripts/build_wheel.sh -l

# å‡çº§ç‰ˆæœ¬ã€æ„å»ºå¹¶å®‰è£…
./scripts/build_wheel.sh -b -i

# åªæ¸…ç†ä¸´æ—¶æ–‡ä»¶
./scripts/build_wheel.sh -c

# è¯¦ç»†è¾“å‡ºæ¨¡å¼
./scripts/build_wheel.sh -v
```

**è„šæœ¬è¾“å‡ºç¤ºä¾‹**:

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     Cuscli Wheel æ‰“åŒ…å·¥å…·                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â„¹ï¸  å½“å‰ç‰ˆæœ¬: 1.0.40

ğŸ”§ æ¸…ç†æ—§çš„æ„å»ºæ–‡ä»¶...
âœ… æ¸…ç†å®Œæˆ

ğŸ”§ æ£€æŸ¥ Python ç¯å¢ƒ...
â„¹ï¸  Python ç‰ˆæœ¬: Python 3.10.12
âœ… ç¯å¢ƒæ£€æŸ¥é€šè¿‡

ğŸ”§ å¼€å§‹æ„å»º wheel åŒ…...
âœ… æ„å»ºå®Œæˆï¼

ğŸ”§ éªŒè¯ç”Ÿæˆçš„ whl æ–‡ä»¶...
âœ… æ‰¾åˆ° whl æ–‡ä»¶:

  æ–‡ä»¶å: cuscli-1.0.40-py3-none-any.whl
  å¤§å°:   4.0M
  è·¯å¾„:   dist/cuscli-1.0.40-py3-none-any.whl

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     âœ¨ æ‰“åŒ…å®Œæˆï¼                            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

**æŠ€æœ¯å®ç°**:

1. **Python å‘½ä»¤æ£€æµ‹**:
   ```bash
   # æ£€æµ‹å¯ç”¨çš„ Python å‘½ä»¤ (æ”¯æŒ python3 å’Œ python)
   if command -v python3 &> /dev/null; then
       PYTHON_CMD="python3"
   elif command -v python &> /dev/null; then
       PYTHON_CMD="python"
   else
       print_error "æœªæ‰¾åˆ° Python å‘½ä»¤ï¼"
       exit 1
   fi
   ```

2. **ç‰ˆæœ¬å·æå–**:
   ```bash
   get_version() {
       $PYTHON_CMD -c "
   import re
   with open('setup.py', 'r', encoding='utf-8') as f:
       content = f.read()
       match = re.search(r\"version='([^']+)'\", content)
       if match:
           print(match.group(1))
   "
   }
   ```

3. **ç‰ˆæœ¬å·å‡çº§**:
   ```bash
   bump_version() {
       local current_version="$1"
       $PYTHON_CMD -c "
   parts = '$current_version'.split('.')
   if len(parts) == 3:
       major, minor, patch = parts
       new_patch = int(patch) + 1
       new_version = f'{major}.{minor}.{new_patch}'
       
       # æ›´æ–° setup.py ä¸­çš„ç‰ˆæœ¬å·
       with open('setup.py', 'r', encoding='utf-8') as f:
           content = f.read()
       
       content = re.sub(
           r\"version='[^']+'\",
           f\"version='{new_version}'\",
           content
       )
       
       with open('setup.py', 'w', encoding='utf-8') as f:
           f.write(content)
       
       print(new_version)
   "
   }
   ```

**ä¿®æ”¹æ–‡ä»¶**:
- æ–°å»º: `scripts/build_wheel.sh` (çº¦370è¡Œ)

**å‘½ä»¤è¡Œå‚æ•°**:

| å‚æ•° | è¯´æ˜ |
|------|------|
| `-h, --help` | æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ |
| `-c, --clean-only` | åªæ¸…ç†ä¸´æ—¶æ–‡ä»¶,ä¸æ„å»º |
| `-i, --install` | æ„å»ºåè‡ªåŠ¨å®‰è£…åˆ°å½“å‰ç¯å¢ƒ |
| `-l, --list` | æ˜¾ç¤º whl åŒ…å†…å®¹åˆ—è¡¨ |
| `-b, --bump-version` | è‡ªåŠ¨å‡çº§ç‰ˆæœ¬å· (patch +1) |
| `-v, --verbose` | è¯¦ç»†è¾“å‡º |
| `--no-clean` | æ„å»ºå‰ä¸æ¸…ç†ä¸´æ—¶æ–‡ä»¶ |

**æµ‹è¯•ç»“æœ**:
- âœ… Linux ç¯å¢ƒä¸‹æ­£å¸¸æ„å»º whl åŒ…
- âœ… è‡ªåŠ¨æ£€æµ‹ python3 å‘½ä»¤
- âœ… å½©è‰²è¾“å‡ºæ˜¾ç¤ºæ­£å¸¸
- âœ… æ„å»ºçš„ whl åŒ…å¤§å° 4.0M,éªŒè¯é€šè¿‡
- âœ… --list å‚æ•°æ­£å¸¸æ˜¾ç¤ºåŒ…å†…å®¹
- âœ… å¸®åŠ©ä¿¡æ¯æ ¼å¼æ¸…æ™°

**ç”¨æˆ·ä½“éªŒæ”¹è¿›**:
- ä¸€é”®æ„å»º,æ— éœ€è®°å¿†å¤æ‚å‘½ä»¤
- å‹å¥½çš„å½©è‰²è¾“å‡ºå’Œè¿›åº¦æç¤º
- å®Œæ•´çš„é”™è¯¯æ£€æŸ¥å’Œæç¤º
- æ”¯æŒå¤šç§ä½¿ç”¨åœºæ™¯ (å¼€å‘ã€æµ‹è¯•ã€å‘å¸ƒ)
- è¯¦ç»†çš„å¸®åŠ©æ–‡æ¡£

**åç»­ä¼˜åŒ–æ–¹å‘**:
- æ”¯æŒå‘å¸ƒåˆ° PyPI (twine upload)
- æ”¯æŒæ„å»ºæºç åŒ… (sdist)
- æ·»åŠ å•å…ƒæµ‹è¯•è¿è¡Œé€‰é¡¹
- ç”Ÿæˆæ„å»ºæŠ¥å‘Š

---
