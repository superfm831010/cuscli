# 辅助功能提示词

## 概述

辅助功能提示词支持 autocoder 的各种辅助性功能，包括项目类型分析、Git 操作、代码质量评估等。这些提示词虽然不是核心功能，但对提升用户体验至关重要。

## 1. 项目类型分析

### 文件位置
`autocoder/utils/auto_project_type.py`

### 功能
自动识别项目类型，选择最合适的处理策略。

### 提示词模式

```python
@byzerllm.prompt()
def analyze_project_type(self, files: list, content_samples: list) -> str:
    """
    根据文件列表和代码样本分析项目类型。

    文件列表：
    {% for file in files %}
    - {{ file }}
    {% endfor %}

    代码样本：
    {{ content_samples }}

    请判断项目类型：
    1. 编程语言（Python、TypeScript、Java等）
    2. 项目类别（Web应用、CLI工具、库等）
    3. 框架类型（React、Django、Spring等）
    4. 构建工具（npm、Maven、Poetry等）

    输出格式：
    ```json
    {
        "language": "...",
        "category": "...",
        "framework": "...",
        "build_tool": "..."
    }
    ```
    """
```

## 2. Git 操作辅助

### 文件位置
`autocoder/common/git_utils.py`

### 功能
生成 Git 提交消息、分析变更等。

### 提示词示例

#### 2.1 生成提交消息

```python
@byzerllm.prompt()
def generate_commit_message(self, changes: dict) -> str:
    """
    根据代码变更生成有意义的提交消息。

    变更摘要：
    {% for file, changes in changes.items() %}
    文件：{{ file }}
    变更：
    - 新增：{{ changes.additions }} 行
    - 删除：{{ changes.deletions }} 行
    - 主要变更：{{ changes.summary }}
    {% endfor %}

    请生成符合规范的提交消息：
    1. 使用规范前缀（feat:, fix:, docs:等）
    2. 简明扼要（50字以内）
    3. 说明变更的原因和影响
    """
```

#### 2.2 分析 Commit 历史

```python
@byzerllm.prompt()
def analyze_commit_history(self, commits: list) -> str:
    """
    分析提交历史，识别模式和问题。

    提交记录：
    {% for commit in commits %}
    - {{ commit.hash[:7] }}: {{ commit.message }}
      作者：{{ commit.author }}
      时间：{{ commit.date }}
    {% endfor %}

    请分析：
    1. 开发活跃度
    2. 主要变更方向
    3. 潜在问题（如频繁的bug修复）
    4. 团队协作模式
    """
```

## 3. 代码修改排序

### 文件位置
`autocoder/common/code_modification_ranker.py`

### 功能
对 AI 建议的多个修改方案进行排序。

### 提示词模式

```python
@byzerllm.prompt()
def rank_modifications(self, proposals: list, context: dict) -> str:
    """
    根据上下文对修改建议进行排序。

    修改建议：
    {% for proposal in proposals %}
    方案 {{ loop.index }}:
    - 文件：{{ proposal.file }}
    - 描述：{{ proposal.description }}
    - 影响范围：{{ proposal.scope }}
    {% endfor %}

    项目上下文：
    {{ context }}

    排序标准：
    1. 解决问题的有效性
    2. 代码质量影响
    3. 实现复杂度
    4. 对其他代码的影响
    5. 可维护性

    请输出排序后的方案编号列表及理由。
    """
```

## 4. 自动配置

### 文件位置
`autocoder/common/auto_configure.py`

### 功能
根据项目特征自动生成配置。

### 提示词示例

```python
@byzerllm.prompt()
def generate_config(self, project_info: dict) -> str:
    """
    根据项目信息生成推荐配置。

    项目信息：
    - 类型：{{ project_info.type }}
    - 语言：{{ project_info.language }}
    - 规模：{{ project_info.size }}
    - 团队：{{ project_info.team_size }}

    请生成：
    1. 代码风格配置
    2. Linter 配置
    3. Git hooks 配置
    4. CI/CD 建议

    格式：YAML 或 JSON
    """
```

## 5. 文档生成

### 文件位置
多个文件中包含文档生成功能

### 功能
自动生成 README、API 文档等。

### 提示词模式

```python
@byzerllm.prompt()
def generate_readme(self, project: dict) -> str:
    """
    生成项目 README 文档。

    项目信息：
    - 名称：{{ project.name }}
    - 描述：{{ project.description }}
    - 主要功能：
    {% for feature in project.features %}
      - {{ feature }}
    {% endfor %}

    请生成包含以下部分的 README：
    1. 项目简介
    2. 安装说明
    3. 使用方法
    4. API 文档（如果适用）
    5. 贡献指南
    6. 许可证信息

    使用 Markdown 格式。
    """
```

## 6. 图像处理辅助

### 文件位置
- `autocoder/common/image_to_page.py`
- `autocoder/common/anything2img.py`
- `autocoder/common/anything2images.py`

### 功能
- 图像转页面
- 文档转图像
- 多格式转换

### 提示词示例

```python
@byzerllm.prompt()
def describe_image_layout(self, image_analysis: dict) -> str:
    """
    描述图像中的页面布局。

    图像分析结果：
    - 检测到的元素：
    {% for element in image_analysis.elements %}
      - {{ element.type }} 位于 {{ element.position }}
    {% endfor %}

    请生成：
    1. HTML 结构建议
    2. CSS 样式建议
    3. 响应式设计建议
    """
```

## 7. 音频处理

### 文件位置
`autocoder/common/audio.py`

### 功能
语音转文字、音频分析等。

### 提示词模式

```python
@byzerllm.prompt()
def process_audio_transcript(self, transcript: str) -> str:
    """
    处理音频转文字的结果。

    转录文本：
    {{ transcript }}

    请：
    1. 修正可能的转录错误
    2. 添加适当的标点符号
    3. 识别专业术语
    4. 生成摘要
    """
```

## 8. Computer Use（计算机使用）

### 文件位置
`autocoder/common/computer_use.py`

### 功能
模拟用户操作计算机。

### 提示词示例

```python
@byzerllm.prompt()
def plan_computer_actions(self, task: str) -> str:
    """
    规划完成任务所需的计算机操作。

    任务：{{ task }}

    请生成操作序列：
    1. 打开应用
    2. 导航到位置
    3. 执行操作
    4. 验证结果

    每个步骤包括：
    - 动作类型（点击、输入、等待等）
    - 目标元素
    - 参数
    - 预期结果
    """
```

## 9. 国际化支持

### 文件位置
`autocoder/lang.py` 及其他语言文件

### 功能
多语言消息生成。

### 提示词模式

```python
@byzerllm.prompt()
def translate_message(self, key: str, params: dict, target_lang: str) -> str:
    """
    根据消息键和参数生成目标语言的消息。

    消息键：{{ key }}
    参数：{{ params }}
    目标语言：{{ target_lang }}

    请生成：
    1. 准确的翻译
    2. 符合目标语言习惯的表达
    3. 保持变量占位符
    """
```

## 10. 测试相关

### 功能
生成测试用例、分析测试覆盖率等。

### 提示词示例

```python
@byzerllm.prompt()
def generate_test_cases(self, function: dict) -> str:
    """
    为函数生成测试用例。

    函数信息：
    - 名称：{{ function.name }}
    - 参数：
    {% for param in function.params %}
      - {{ param.name }}: {{ param.type }}
    {% endfor %}
    - 返回值：{{ function.return_type }}
    - 功能：{{ function.description }}

    请生成：
    1. 正常情况测试用例
    2. 边界情况测试用例
    3. 异常情况测试用例
    4. 断言语句
    """
```

## 辅助功能提示词设计模式

### 1. 上下文感知模式
根据项目类型、语言、团队规模等上下文调整输出。

### 2. 规范遵循模式
遵循行业标准和最佳实践（如 Conventional Commits）。

### 3. 智能默认模式
提供合理的默认值，减少用户输入。

### 4. 增量改进模式
基于已有内容进行改进，而非从头生成。

## 使用建议

1. **项目初始化时**：使用项目类型分析和自动配置
2. **开发过程中**：使用代码质量评估和修改排序
3. **提交代码时**：使用 Git 辅助功能
4. **文档维护时**：使用文档生成功能
5. **测试阶段**：使用测试用例生成

## 总结

辅助功能提示词虽然不是核心功能，但能显著提升开发体验：

- **自动化重复任务**：如生成配置、文档
- **智能决策支持**：如代码修改排序
- **规范化输出**：如 Git 提交消息
- **多模态支持**：如图像、音频处理
- **国际化**：多语言支持

---

**文档创建时间**：2025-10-17
**相关文件**：
- `autocoder/utils/*.py`
- `autocoder/common/*.py`
- `autocoder/lang.py`
