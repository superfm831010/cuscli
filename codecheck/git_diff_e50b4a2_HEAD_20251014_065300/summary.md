# 📊 代码检查报告 - Git Diff

**检查类型**: Git Diff 检查
**对比范围**: `e50b4a2`...`HEAD`
**差异文件**: 3 个
**检查时间**: 2025-10-14T06:57:13.931494

---

## 📈 检查概览

| 统计项 | 数量 |
|--------|------|
| 总文件数 | 3 |
| 已检查文件 | 2 |
| 完成率 | 66.7% |
| **总问题数** | **54** |

## 🔍 问题分布

| 严重程度 | 数量 | 占比 |
|---------|------|------|
| ❌ 错误 (ERROR) | 15 | 27.8% |
| ⚠️ 警告 (WARNING) | 11 | 20.4% |
| ℹ️ 提示 (INFO) | 28 | 51.9% |

---

## 📋 文件检查详情

| 文件路径 | 状态 | 错误 | 警告 | 提示 | 总计 |
|---------|------|------|------|------|------|
| `autocoder/plugins/code_checker_plugin.py` | ✅ | 11 | 4 | 19 | **34** |
| `test_git_completion.py` | ✅ | 4 | 7 | 9 | **20** |
| `docs/二次开发记录.md` | ⏭️ | 0 | 0 | 0 | **0** |

---

## 🔴 问题详情 (共 2 个文件有问题)

### 📄 autocoder/plugins/code_checker_plugin.py

**问题数**: 34 个 (❌ 11 ⚠️ 4 ℹ️ 19)

- ❌ **第 1123 行**: 直接使用print输出错误信息，未使用日志系统
- ❌ **第 1132 行**: 直接使用print输出错误信息，未使用日志系统
- ❌ **第 1134 行**: 直接使用print输出错误信息，未使用日志系统
  _... 还有 8 个错误_
- ⚠️ **第 1118 行**: 发现复杂的if-else嵌套结构，嵌套层数达到4层（if-try-if-else），超过规定的3层阈值
- ⚠️ **第 1123 行**: 多个地方使用print输出警告信息，应使用适当的日志级别
  _... 还有 2 个警告_
- ℹ️ **第 1120 行**: 发现魔数1，用于重复次数的最小值验证
  _... 还有 18 个提示_

### 📄 test_git_completion.py

**问题数**: 20 个 (❌ 4 ⚠️ 7 ℹ️ 9)

- ❌ **第 32 行**: 直接访问 repo.heads 属性，未进行空值检查
- ❌ **第 35 行**: 直接调用 current_branch.tracking_branch()，未检查 current_branch 是否为空
- ❌ **第 96 行**: 直接访问 repo.heads 和 repo.active_branch，未进行空值检查
  _... 还有 1 个错误_
- ⚠️ **第 31 行**: 发现复杂的嵌套结构，包含多层 if 嵌套和逻辑分支
- ⚠️ **第 48 行**: 发现重复的字符串截断逻辑，在多个地方出现相同代码
  _... 还有 5 个警告_
- ℹ️ **第 14 行**: test_git_completion 方法行数为 146 行（159-14+1），超过 30 行限制
  _... 还有 8 个提示_

---

## 📝 建议

- ❌ 发现 **15** 个错误，请优先修复
- ⚠️ 发现 **11** 个警告，建议修复以提高代码质量
- ℹ️ 发现 **28** 个改进建议，可考虑优化

## 📋 日志文件

本次检查的详细执行日志已保存在：

- **日志文件**: `check.log`

**日志文件用途**：
- 记录完整的检查执行过程（文件扫描、规则加载、LLM 调用等）
- 包含详细的 DEBUG 级别信息，便于问题排查
- 记录所有警告和错误信息
- 适用场景：
  - 检查过程异常中断，需要了解中断原因
  - LLM 调用失败或超时，需要查看详细错误信息
  - 需要了解检查过程的性能数据（各文件耗时等）

## 📁 报告文件组织

为便于快速查看，报告文件已按问题分类存储：

- **有问题的文件** (2 个): `files/with_issues/` 目录
- **无问题的文件** (1 个): `files/no_issues/` 目录
- **日志文件**: `check.log`（详细执行过程）

💡 **提示**: 优先查看 `files/with_issues/` 目录中的报告进行修复。如需排查问题，可查看 `check.log` 日志文件。
